---
description: JWT 토큰에 대해 알아봅니다.
---

# JWT Token

로그인 종류의 선택

1. 세션 인증 : 유저가 로그인을 하면, 서버측에서 유저의 인증정보를 기억하고 있음. 여기서 이 정보를 세션이라고 한다. 세션은 메모리, 디스크, DB 등에 담긴다.
   * 로그인 중인 유저가 많아질수록 성능에 무리가 감. 메모리나 DB성능에 무리가 간다.
   * 서버 확장의 어려움 : 여러 갈래로 분산된 프로세스 간에 세션의 정보가 동기화되야 하므로 어려움이 따른다.
2. 토큰 인증 : 서버가 유저의 정보를 가지고 있지 않고, 인증의 순간에 유저에게 토큰을 발급해준다.
   * 토큰 자체에 유효기간과 정보를 담고 있으므로, 서버의 확장성도 좋고 다른 플랫폼 간에 교류도 가능하게 된다.
   * 모바일의 경우에 사용하기 편리. 기존 세션의 경우 쿠키를 사용해하는데,  이 과정이 필요가 없어져 편리함.

=&gt; 그래서 토큰인증을 선택함. \(JWT\)



JWT \(JSON Web Token\)

* header . payload . signature \(aaaa.bbbb.cccc\) 형태를 가진다.
* header
  * 토큰의 타입 + 해싱 알고리즘
* payload
  * 등록된 클레임\(이미 정해진 토큰에 대한 정보\)  ex\) 토큰 발급자, 제목, 대상자 등
  * 공개 클레임
  * 비공개 클레임
* signature



결국, 프론트에서 필요한 작업은, 로그인 성공시 서버로부터 받은 토큰\(JWT\)를 어디서 어떻게 관리하느냐?

1. 웹 스토리지에 저장\(local storage \|\| session storage\) 후 웹 요청할 시 HTTP 헤더 값에 넣어서 요청 
   * 보안에 매우 취약하다.
2. 쿠키에 저장, 쿠키를 단지 정보 전송 수단으로 사용함.
   * 쿠키 설정 시, httpOnly 값을 활성화 해주면 네트워크 통신상에만 쿠키가 붙게 된다. 그럼 브라우저상에서 자바스크립트로 토큰값에 접근하는 것이 불가능해진다.



Flow

1. 서버로부터 토큰을 받을 때, access\_token만 받는 것이 아닌 refresh\_token도 같이 받는다.
   * access\_token : 짧은 만료기간을 가진다. 쿠키에 저장
   * refresh\_token : 액세스 토큰을 발급받기 위한 정보를 갖는다. 클라이언트가 액세스 토큰이 만료되었을 때, refresh\_token을 통해 서버에 요청을 보내서 만료된 access\_token을 다시 받는다. access\_token 보다 긴 만료기간을 갖는다. 이 또한 쿠키에 저
   * sliding session : 일정기간 사용하지 않으면 만료되는 세션! 
   * 추가로 비동기적인 작업을 위한 redux 미들웨어가 필요할 수 있다 \(정크, 사가...\)

 

